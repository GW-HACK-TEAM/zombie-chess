<!doctype html>
<html>
<head>
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/chessboard-0.3.0.min.css"/>
  <link rel="stylesheet" href="css/main.css"/>
  <script src="js/contrib/lodash.js"></script>
  <script src="js/contrib/jquery-1.10.1.min.js"></script>
  <script src="js/contrib/bootstrap.min.js"></script>
  <script src="js/contrib/chess.min.js"></script>
  <script src="js/contrib/chessboard-0.3.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.0.1/howler.min.js"></script>
  <title>Rock Legends vs Electronic Dance Music Legends</title>
</head>

<body>
<div class="toolbar">
  <div class="container">
    <div class="menu">
      <ul>
        <li>
          <a class="exit">Concede Game</a>
        </li>
        <li>
          <a class="show-settings" href="#">Options</a>
        </li>
      </ul>
    </div>

    <div class="megatron">
      <div class="megatron-content">
        <h1 class="username"></h1>
        <span class="score-label">Score</span>
        <span class="h1 score">0</span>
      </div>
    </div>

    <div class="social">
      <ul>
        <li>
          Share
        </li>
        <li>
          <img src="./img/icons/facebook.png" />
        </li>
        <li>
          <img src="./img/icons/twitter.png" />
        </li>
        <li>
          <img src="./img/icons/google.png" />
        </li>
      </ul>
    </div>
  </div>
</div>

<div class="game-area">
  <div class="container">
    <div id="board" style="width: 512px"></div>
    <img class="rock-light light-purple light-1" src="img/environment/purple-light.png">
    <img class="rock-light light-red light-2" src="img/environment/red-light.png">
    <img class="rock-light light-purple light-3" src="img/environment/purple-light.png">
    <img class="rock-light light-purple light-4" src="img/environment/red-light.png">

    <img class="rock-light light-purple light-5" src="img/environment/purple-light.png">
    <img class="rock-light light-purple light-6" src="img/environment/purple-light.png">

    <img class="rock-light light-red light-7" src="img/environment/red-light.png">
    <img class="rock-light light-purple light-8" src="img/environment/purple-light.png">
    <img class="rock-light light-red light-9" src="img/environment/red-light.png">
    <img class="rock-light light-purple light-10" src="img/environment/purple-light.png">

    <img class="flapping-flag flapping-flag-1" src="img/environment/red-flag.gif">
    <img class="flapping-flag flapping-flag-2" src="img/environment/red-flag.gif">
    <img class="flapping-flag flapping-flag-3" src="img/environment/red-flag.gif">
    <img class="flapping-flag flapping-flag-4" src="img/environment/red-flag.gif">

    <img class="laser laser-1 laser-right" src="img/environment/Laser-strobe_01.png">
    <img class="laser laser-2 laser-left" src="img/environment/Laser-strobe_01.png">
    <img class="laser laser-3 laser-right" src="img/environment/Laser-strobe_01.png">
    <img class="laser laser-4 laser-left" src="img/environment/Laser-strobe_01.png">
    <img class="laser laser-5 laser-right" src="img/environment/Laser-strobe_01.png">
    <img class="laser laser-6 laser-left" src="img/environment/Laser-strobe_01.png">
  </div>

  <div class="bants-wrapper rock-bants">
  </div>
  <div class="bants-wrapper dance-bants">
  </div>

  <div class="settings">
    <h3>Moves:</h3>
    <div id="pgn"></div>
    <hr>
    <form class="form-horizontal">
      <div class="form-group">
        <label for="timeBase" class="control-label col-xs-4 col-sm-6 col-md-4">Base time (min)</label>
        <div class="col-xs-4 col-sm-6 col-md-4">
          <input type="number" class="form-control" id="timeBase" value="5">
        </div>
      </div>
      <div class="form-group">
        <label for="timeInc" class="control-label col-xs-4 col-sm-6 col-md-4">Increment (sec)</label>
        <div class="col-xs-4 col-sm-6 col-md-4">
          <input type="number" class="form-control" id="timeInc" value="2">
        </div>
      </div>
      <div class="form-group">
        <label for="skillLevel" class="control-label col-xs-4 col-sm-6 col-md-4">Skill Level (0-20)</label>
        <div class="col-xs-4 col-sm-6 col-md-4">
          <input type="number" class="form-control" id="skillLevel" value="0">
        </div>
      </div>
      <div class="form-group">
        <label for="color" class="control-label col-xs-4 col-sm-6 col-md-4">I play</label>
        <div class="col-xs-4 col-sm-6 col-md-4">
          <div class="btn-group" data-toggle="buttons">
            <label class="btn btn-primary active" id="color-white"><input type="radio" name="color">White</label>
            <label class="btn btn-primary" id="color-black"><input type="radio" name="color">Black</label>
          </div>
        </div>
      </div>
      <div class="form-group">
        <label for="showScore" class="control-label col-xs-4 col-sm-6 col-md-4">Show score</label>
        <div class="col-xs-4 col-sm-6 col-md-4">
          <input type="checkbox" class="form-control" id="showScore" checked>
        </div>
      </div>
      <div class="form-group">
        <label for="color" class="control-label col-xs-4 col-sm-6 col-md-4"></label>
        <div class="col-xs-4 col-sm-6 col-md-4">
          <button type="button" class="btn btn-primary start-new-game">New Game</button>
        </div>
      </div>

      <div class="form-group">
        <label for="color" class="control-label col-xs-4 col-sm-6 col-md-4">Promote to</label>
        <div class="col-xs-4 col-sm-6 col-md-4">
          <select id=promote>
            <option value=q selected>Queen</option>
            <option value=r>Rook</option>
            <option value=b>Bishop</option>
            <option value=n>Knight</option>
          </select>
        </div>
      </div>
    </form>
    <h5>Evaluation</h5>
    <pre id=evaluation></pre>
    <hr>
    <div id="engineStatus">...</div>
  </div>
  <div class="winningModal hidden">
    <h1 class="text-center">Winner</h1>
    <h2 class="text-center">
      You have disappointed the rock / pop gods. FOR SHAME!
    </h2>
    <p class="text-center">
      <img src="img/chesspieces/danceheroes/oliverheldens_icon_chess.png" height="64" width="64"/>
    </p>
    <h2 class="text-center concedelink">
      <a href="leaderboard.html" class="btn btn-lg">
        Go to Leaderboard
      </a>
    </h2>

  </div>
</div>

<script>
  let username = localStorage.getItem('username');
  let side = localStorage.getItem('color');
  $('.exit').click(function () {
    $('.winningModal').removeClass('hidden');
    let score = $('.score').text();
    if(!score){
      return;
    }
    if(score == 'Mate in 1'){
      score = 100;
    }
    localStorage.setItem('score', score);
    let username = localStorage.getItem('username');
    let side = localStorage.getItem('color');
    let payload = {
      score: score,
      username: username,
      side: side
    };
    $.post( "http://52.31.244.147/api/postScore", payload);
  });
  $('.username').text(username);
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-1662516-22', 'auto');
  ga('send', 'pageview');

</script>
<script src="./js/egg.js"></script>
<script src="./js/bulletin.js"></script>
<script src="./js/insults.js"></script>
<script src="./js/lib/events.js"></script>
<script src="./js/sounds.js"></script>
<script src="./js/enginegame.js"></script>
<script src="./js/main.js"></script>
</body>
</html>
